{"version":3,"sources":["../../src/is/tabbable.js"],"names":[],"mappings":";;;;;;;;;;;;;AAcA,MAAM,wBAAwB,GAAG,4BAA4B,CAAC;;mBAE/C,UAAS,OAAO,EAAE;AAC/B,QAAI,OAAO,KAAK,QAAQ,EAAE;AACxB,aAAO,GAAG,QAAQ,CAAC,eAAe,CAAC;KACpC;;AAED,QAAI,CAAC,OAAO,IAAI,OAAO,CAAC,QAAQ,KAAK,IAAI,CAAC,YAAY,EAAE;AACtD,YAAM,IAAI,SAAS,CAAC,kDAAkD,CAAC,CAAC;KACzE;;AAED,QAAI,sBAAS,IAAI,KAAK,eAAe,IAAI,UAAU,CAAC,sBAAS,OAAO,CAAC,GAAG,EAAE,IAAI,sBAAS,EAAE,CAAC,MAAM,KAAK,SAAS,EAAE;;;;AAI9G,aAAO,KAAK,CAAC;KACd;;AAED,QAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;AAChD,QAAM,SAAS,GAAG,+BAAc,OAAO,CAAC,CAAC;AACzC,QAAM,QAAQ,GAAG,SAAS,KAAK,IAAI,GAAG,IAAI,GAAG,SAAS,IAAI,CAAC,CAAC;;;;AAI5D,QAAI,OAAO,CAAC,YAAY,CAAC,iBAAiB,CAAC,EAAE;;AAE3C,aAAO,QAAQ,KAAK,KAAK,CAAC;KAC3B;;AAED,QAAI,wBAAwB,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,QAAQ,KAAK,IAAI,EAAE;AAChE,aAAO,KAAK,CAAC;KACd;;;AAGD,QAAI,OAAO,CAAC,QAAQ,KAAK,SAAS,EAAE;AAClC,aAAO,KAAK,CAAC;KACd;;AAED,QAAI,QAAQ,KAAK,OAAO,EAAE;AACxB,UAAI,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,CAAC,EAAE;;AAErC,eAAO,KAAK,CAAC;OACd,MAAM,IAAI,sBAAS,IAAI,KAAK,QAAQ,IAAI,sBAAS,IAAI,KAAK,eAAe,EAAE;;AAE1E,eAAO,IAAI,CAAC;OACb;KACF;;AAED,QAAI,QAAQ,KAAK,OAAO,EAAE;AACxB,UAAI,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,CAAC,EAAE;AACrC,YAAI,sBAAS,IAAI,KAAK,IAAI,EAAE;;AAE1B,iBAAO,KAAK,CAAC;SACd;OACF,MAAM,IAAI,sBAAS,IAAI,KAAK,QAAQ,IAAI,sBAAS,IAAI,KAAK,SAAS,EAAE;;AAEpE,eAAO,IAAI,CAAC;OACb;KACF;;AAED,QAAI,QAAQ,KAAK,QAAQ,EAAE;AACzB,UAAI,sBAAS,MAAM,KAAK,OAAO,IAAI,sBAAS,MAAM,KAAK,QAAQ,EAAE;;AAE/D,eAAO,KAAK,CAAC;OACd;KACF;;AAED,QAAI,sBAAS,IAAI,KAAK,QAAQ,IAAI,UAAU,CAAC,sBAAS,OAAO,CAAC,GAAG,EAAE,IAAI,sBAAS,EAAE,CAAC,MAAM,KAAK,KAAK,EAAE;;;AAGnG,UAAI,mBAAmB,GAAG,AAAC,QAAQ,KAAK,OAAO,IAAI,OAAO,CAAC,IAAI,KAAK,MAAM,IAAI,OAAO,CAAC,IAAI,KAAK,UAAU,IACpG,QAAQ,KAAK,QAAQ,IACrB,QAAQ,KAAK,UAAU,IACvB,OAAO,CAAC,YAAY,CAAC,iBAAiB,CAAC,CAAC;;AAE7C,UAAI,CAAC,mBAAmB,EAAE;AACxB,YAAM,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;AACrD,2BAAmB,GAAG,YAlF1B,oBAAoB,EAkF2B,KAAK,CAAC,CAAC;OACnD;;AAED,UAAI,CAAC,mBAAmB,EAAE;AACxB,eAAO,KAAK,CAAC;OACd;KACF;;AAED,QAAI,sBAAS,IAAI,KAAK,SAAS,EAAE;;;AAG/B,UAAM,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;AACrD,UAAI,YAhGN,oBAAoB,EAgGO,KAAK,CAAC,EAAE;;AAE/B,eAAO,QAAQ,KAAK,KAAK,CAAC;OAC3B;KACF;;AAED,QAAI,sBAAS,IAAI,KAAK,IAAI,EAAE;;;AAG1B,UAAI,QAAQ,KAAK,MAAM,EAAE;AACvB,YAAM,GAAG,GAAG,YA3GhB,cAAc,EA2GiB,OAAO,CAAC,CAAC;AACpC,YAAI,GAAG,IAAI,+BAAc,GAAG,CAAC,GAAG,CAAC,EAAE;AACjC,iBAAO,KAAK,CAAC;SACd;OACF;;AAED,UAAM,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;AACrD,UAAI,YA/GN,oBAAoB,EA+GO,KAAK,CAAC,EAAE;;AAE/B,eAAO,OAAO,CAAC,QAAQ,IAAI,CAAC,CAAC;OAC9B;;;;AAID,UAAI,YAvHN,qBAAqB,EAuHO,OAAO,EAAE,QAAQ,CAAC,EAAE;AAC5C,eAAO,KAAK,CAAC;OACd;;AAED,UAAM,OAAM,GAAG,OAAO,CAAC,UAAU,CAAC;;AAElC,UAAI,YA7HN,qBAAqB,EA6HO,OAAM,EAAE,QAAQ,CAAC,EAAE;AAC3C,eAAO,KAAK,CAAC;OACd;;;;AAID,UAAM,WAAW,GAAG,MAAM,CAAC,gBAAgB,CAAC,OAAM,EAAE,IAAI,CAAC,CAAC;AAC1D,UAAI,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;AAC5C,eAAO,KAAK,CAAC;OACd;KACF;;;AAGD,WAAO,OAAO,CAAC,QAAQ,IAAI,CAAC,CAAC;GAC9B","file":"tabbable.js","sourcesContent":["\n// determine if an element can be focused by keyboard (i.e. is part of the document's sequential focus navigation order)\n\nimport platform from 'platform';\nimport tabindexValue from '../util/tabindex-value';\nimport {\n  getImageOfArea,\n  hasCssOverflowScroll,\n  isScrollableContainer,\n  isUserModifyWritable,\n} from './is.util';\n\n// Internet Explorer 11 considers fieldset, table, td focusable, but not tabbable\n// Internet Explorer 11 considers body to have [tabindex=0], but does not allow tabbing to it\nconst focusableElementsPattern = /^(fieldset|table|td|body)$/;\n\nexport default function(element) {\n  if (element === document) {\n    element = document.documentElement;\n  }\n\n  if (!element || element.nodeType !== Node.ELEMENT_NODE) {\n    throw new TypeError('is/tabbable requires an argument of type Element');\n  }\n\n  if (platform.name === 'Chrome Mobile' && parseFloat(platform.version) > 42 && platform.os.family === 'Android') {\n    // External keyboard support worked fine in CHrome 42, but stopped working in Chrome 45.\n    // The on-screen keyboard does not provide a way to focus the next input element (like iOS does).\n    // That leaves us with no option to advance focus by keyboard, ergo nothing is tabbable (keyboard focusable).\n    return false;\n  }\n\n  const nodeName = element.nodeName.toLowerCase();\n  const _tabindex = tabindexValue(element);\n  const tabindex = _tabindex === null ? null : _tabindex >= 0;\n\n  // NOTE: Firefox 31 considers [contenteditable] to have [tabindex=-1], but allows tabbing to it\n  // fixed in Firefox 40 the latest - https://bugzilla.mozilla.org/show_bug.cgi?id=1185657\n  if (element.hasAttribute('contenteditable')) {\n    // tabbing can still be disabled by explicitly providing [tabindex=\"-1\"]\n    return tabindex !== false;\n  }\n\n  if (focusableElementsPattern.test(nodeName) && tabindex !== true) {\n    return false;\n  }\n\n  // in Trident and Gecko SVGElement does not know about the tabIndex property\n  if (element.tabIndex === undefined) {\n    return false;\n  }\n\n  if (nodeName === 'audio') {\n    if (!element.hasAttribute('controls')) {\n      // In Internet Explorer the <audio> element is focusable, but not tabbable, and tabIndex property is wrong\n      return false;\n    } else if (platform.name === 'Chrome' || platform.name === 'Chrome Mobile') {\n      // In Chrome <audio controls tabindex=\"-1\"> remains keyboard focusable\n      return true;\n    }\n  }\n\n  if (nodeName === 'video') {\n    if (!element.hasAttribute('controls')) {\n      if (platform.name === 'IE') {\n        // In Internet Explorer the <video> element is focusable, but not tabbable, and tabIndex property is wrong\n        return false;\n      }\n    } else if (platform.name === 'Chrome' || platform.name === 'Firefox') {\n      // In Chrome and Firefox <video controls tabindex=\"-1\"> remains keyboard focusable\n      return true;\n    }\n  }\n\n  if (nodeName === 'object') {\n    if (platform.layout === 'Blink' || platform.layout === 'WebKit') {\n      // In all Blink and WebKit based browsers <embed> and <object> are never keyboard focusable, even with tabindex=\"0\" set\n      return false;\n    }\n  }\n\n  if (platform.name === 'Safari' && parseFloat(platform.version) < 10 && platform.os.family === 'iOS') {\n    // iOS 8 only considers a hand full of elements tabbable (keyboard focusable)\n    // this holds true even with external keyboards\n    let potentiallyTabbable = (nodeName === 'input' && element.type === 'text' || element.type === 'password')\n      || nodeName === 'select'\n      || nodeName === 'textarea'\n      || element.hasAttribute('contenteditable');\n\n    if (!potentiallyTabbable) {\n      const style = window.getComputedStyle(element, null);\n      potentiallyTabbable = isUserModifyWritable(style);\n    }\n\n    if (!potentiallyTabbable) {\n      return false;\n    }\n  }\n\n  if (platform.name === 'Firefox') {\n    // Firefox considers scrollable containers keyboard focusable,\n    // even though their tabIndex property is -1\n    const style = window.getComputedStyle(element, null);\n    if (hasCssOverflowScroll(style)) {\n      // value of tabindex takes precedence\n      return tabindex !== false;\n    }\n  }\n\n  if (platform.name === 'IE') {\n    // IE degrades <area> to script focusable, if the image\n    // using the <map> has been given tabindex=\"-1\"\n    if (nodeName === 'area') {\n      const img = getImageOfArea(element);\n      if (img && tabindexValue(img) < 0) {\n        return false;\n      }\n    }\n\n    const style = window.getComputedStyle(element, null);\n    if (isUserModifyWritable(style)) {\n      // prevent being swallowed by the overzealous isScrollableContainer() below\n      return element.tabIndex >= 0;\n    }\n\n    // IE considers scrollable containers script focusable only,\n    // even though their tabIndex property is 0\n    if (isScrollableContainer(element, nodeName)) {\n      return false;\n    }\n\n    const parent = element.parentNode;\n    // IE considers scrollable bodies script focusable only,\n    if (isScrollableContainer(parent, nodeName)) {\n      return false;\n    }\n\n    // Children of focusable elements with display:flex are focusable in IE10-11,\n    // even though their tabIndex property suggests otherwise\n    const parentStyle = window.getComputedStyle(parent, null);\n    if (parentStyle.display.indexOf('flex') > -1) {\n      return false;\n    }\n  }\n\n  // http://www.w3.org/WAI/PF/aria-practices/#focus_tabindex\n  return element.tabIndex >= 0;\n}\n"]}