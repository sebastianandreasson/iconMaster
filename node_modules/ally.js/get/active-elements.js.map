{"version":3,"sources":["../../src/get/active-elements.js"],"names":[],"mappings":";;;;;;;;;;;;0BAIuB,gBAAgB;;;;iCACN,uBAAuB;;;;AAExD,SAAS,qBAAqB,GAAG;AAC/B,MAAM,IAAI,GAAG,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;;AAEtC,SAAO,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,UAAU,EAAE;AACpC,QAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;GAChD;;AAED,SAAO,IAAI,CAAC;CACb;;AAED,SAAS,uBAAuB,GAAG;AACjC,MAAM,KAAK,GAAG,oCAAqB,EAAC,OAAO,EAAE,QAAQ,CAAC,aAAa,EAAC,CAAC,CAAC;AACtE,SAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;CAC/C;;qBAEc,YAAW;AACxB,MAAI,QAAQ,CAAC,aAAa,KAAK,IAAI,EAAE;;AAEnC,YAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;GACvB;;;;AAID,MAAI,6BAAW,QAAQ,CAAC,aAAa,CAAC,EAAE;AACtC,WAAO,uBAAuB,EAAE,CAAC;GAClC;;AAED,SAAO,qBAAqB,EAAE,CAAC;CAChC","file":"active-elements.js","sourcesContent":["\n// [0] always is the actual active element (even within web-components)\n// [0+n] is the hierarchy of shadow-doms with [length -1] being the top most shadow-host\n\nimport isShadowed from '../is/shadowed';\nimport getShadowHostParents from './shadow-host-parents';\n\nfunction walkToShadowedElement() {\n  const list = [document.activeElement];\n\n  while (list[0] && list[0].shadowRoot) {\n    list.unshift(list[0].shadowRoot.activeElement);\n  }\n\n  return list;\n}\n\nfunction walkFromShadowedElement() {\n  const hosts = getShadowHostParents({context: document.activeElement});\n  return [document.activeElement].concat(hosts);\n}\n\nexport default function() {\n  if (document.activeElement === null) {\n    // IE10 does not redirect focus to <body> when the activeElement is removed\n    document.body.focus();\n  }\n\n  // Firefox currently leaks the shadowed element\n  // @browser-issue Gecko https://bugzilla.mozilla.org/show_bug.cgi?id=1117535\n  if (isShadowed(document.activeElement)) {\n    return walkFromShadowedElement();\n  }\n\n  return walkToShadowedElement();\n}\n"]}