{"version":3,"sources":["../../src/query/focusable.strict.js"],"names":[],"mappings":";;;;;;;;;qBA+CwB,oBAAoB;;;;2BA3CpB,iBAAiB;;;;+BACb,sBAAsB;;;;8BACvB,qBAAqB;;;;+BACxB,sBAAsB;;;;;AAG9C,IAAM,eAAe,GAAG,SAAlB,eAAe,CAAY,IAAI,EAAE;AACrC,MAAI,IAAI,CAAC,UAAU,EAAE;;;AAGnB,WAAO,UAAU,CAAC,aAAa,CAAC;GACjC;;AAED,MAAI,8BAAY,IAAI,CAAC,EAAE;;AAErB,WAAO,UAAU,CAAC,aAAa,CAAC;GACjC;;AAED,SAAO,UAAU,CAAC,WAAW,CAAC;CAC/B,CAAC;;;AAGF,eAAe,CAAC,UAAU,GAAG,eAAe,CAAC;;;AAG7C,IAAM,uBAAuB,GAAG,SAA1B,uBAAuB,CAAY,IAAI,EAAE;AAC7C,MAAI,IAAI,CAAC,UAAU,EAAE;;;AAGnB,WAAO,UAAU,CAAC,aAAa,CAAC;GACjC;;AAED,MAAI,iCAAe,IAAI,CAAC,IAAI,kCAAgB,IAAI,CAAC,EAAE;;AAEjD,WAAO,UAAU,CAAC,aAAa,CAAC;GACjC;;AAED,SAAO,UAAU,CAAC,WAAW,CAAC;CAC/B,CAAC;;;AAGF,uBAAuB,CAAC,UAAU,GAAG,uBAAuB,CAAC;;AAE9C,SAAS,oBAAoB,GAA2C;mEAAJ,EAAE;;MAAvC,OAAO,QAAP,OAAO;MAAE,cAAc,QAAd,cAAc;MAAE,QAAQ,QAAR,QAAQ;;AAC7E,MAAI,CAAC,OAAO,EAAE;AACZ,WAAO,GAAG,QAAQ,CAAC,eAAe,CAAC;GACpC;;AAED,MAAM,SAAS,GAAG,kCAAY,OAAO,CAAC,CAAC;;AAEvC,MAAM,MAAM,GAAG,SAAS,CAAC,gBAAgB;;AAEvC,SAAO;;AAEP,YAAU,CAAC,YAAY;;AAEvB,UAAQ,KAAK,KAAK,GAAG,uBAAuB,GAAG,eAAe;;AAE9D,OAAK,CACN,CAAC;;AAEF,MAAI,IAAI,GAAG,EAAE,CAAC;;AAEd,SAAO,MAAM,CAAC,QAAQ,EAAE,EAAE;AACxB,QAAI,MAAM,CAAC,WAAW,CAAC,UAAU,EAAE;AACjC,UAAI,8BAAY,MAAM,CAAC,WAAW,CAAC,EAAE;AACnC,YAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;OAC/B;;AAED,UAAI,GAAG,IAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC;AACtC,eAAO,EAAE,MAAM,CAAC,WAAW,CAAC,UAAU;AACtC,gBAAQ,EAAR,QAAQ;OACT,CAAC,CAAC,CAAC;KACL,MAAM;AACL,UAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;KAC/B;GACF;;;AAGD,MAAI,cAAc,EAAE;AAClB,QAAI,QAAQ,KAAK,KAAK,EAAE;AACtB,UAAI,iCAAe,OAAO,CAAC,IAAI,kCAAgB,OAAO,CAAC,EAAE;AACvD,YAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;OACvB;KACF,MAAM,IAAI,8BAAY,OAAO,CAAC,EAAE;AAC/B,UAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;KACvB;GACF;;AAED,SAAO,IAAI,CAAC;CACb","file":"focusable.strict.js","sourcesContent":["\n// http://www.w3.org/TR/html5/editing.html#focusable\n// http://www.w3.org/WAI/PF/aria-practices/#keyboard\n\nimport isFocusable from '../is/focusable';\nimport isFocusRelevant from '../is/focus-relevant';\nimport isOnlyTabbable from '../is/only-tabbable';\nimport getDocument from '../util/get-document';\n\n// see https://developer.mozilla.org/en-US/docs/Web/API/NodeFilter\nconst FocusableFilter = function(node) {\n  if (node.shadowRoot) {\n    // return ShadowRoot elements regardless of them being focusable,\n    // so they can be walked recursively later\n    return NodeFilter.FILTER_ACCEPT;\n  }\n\n  if (isFocusable(node)) {\n    // finds elements that could have been found by document.querySelectorAll()\n    return NodeFilter.FILTER_ACCEPT;\n  }\n\n  return NodeFilter.FILTER_SKIP;\n};\n// IE requires a function, Browsers require {acceptNode: function}\n// see http://www.bennadel.com/blog/2607-finding-html-comment-nodes-in-the-dom-using-treewalker.htm\nFocusableFilter.acceptNode = FocusableFilter;\n\n// see https://developer.mozilla.org/en-US/docs/Web/API/NodeFilter\nconst PossiblyFocusableFilter = function(node) {\n  if (node.shadowRoot) {\n    // return ShadowRoot elements regardless of them being focusable,\n    // so they can be walked recursively later\n    return NodeFilter.FILTER_ACCEPT;\n  }\n\n  if (isOnlyTabbable(node) || isFocusRelevant(node)) {\n    // finds elements that could have been found by document.querySelectorAll()\n    return NodeFilter.FILTER_ACCEPT;\n  }\n\n  return NodeFilter.FILTER_SKIP;\n};\n// IE requires a function, Browsers require {acceptNode: function}\n// see http://www.bennadel.com/blog/2607-finding-html-comment-nodes-in-the-dom-using-treewalker.htm\nPossiblyFocusableFilter.acceptNode = PossiblyFocusableFilter;\n\nexport default function queryFocusableStrict({context, includeContext, strategy} = {}) {\n  if (!context) {\n    context = document.documentElement;\n  }\n\n  const _document = getDocument(context);\n  // see https://developer.mozilla.org/en-US/docs/Web/API/Document/createTreeWalker\n  const walker = _document.createTreeWalker(\n    // root element to start search in\n    context,\n    // element type filter\n    NodeFilter.SHOW_ELEMENT,\n    // custom NodeFilter filter\n    strategy === 'all' ? PossiblyFocusableFilter : FocusableFilter,\n    // deprecated, but IE requires it\n    false\n  );\n\n  let list = [];\n\n  while (walker.nextNode()) {\n    if (walker.currentNode.shadowRoot) {\n      if (isFocusable(walker.currentNode)) {\n        list.push(walker.currentNode);\n      }\n\n      list = list.concat(queryFocusableStrict({\n        context: walker.currentNode.shadowRoot,\n        strategy,\n      }));\n    } else {\n      list.push(walker.currentNode);\n    }\n  }\n\n  // add context if requested and focusable\n  if (includeContext) {\n    if (strategy === 'all') {\n      if (isOnlyTabbable(context) || isFocusRelevant(context)) {\n        list.unshift(context);\n      }\n    } else if (isFocusable(context)) {\n      list.unshift(context);\n    }\n  }\n\n  return list;\n}\n"]}